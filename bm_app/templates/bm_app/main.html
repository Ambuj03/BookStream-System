{% extends "bm_app/base.html" %}
{% load static %}

{% block title %}Brihat Mridanga{% endblock %}

{%block extra_css%}
<link rel="stylesheet" href="{%static 'bm_app/css/landing.css'%}">
<link rel="stylesheet" href="{%static 'bm_app/css/landing-3d.css'%}">
<style>
    /* Override original styles for consistency */
    body {
        background: var(--surface-primary) !important;
    }
    
    .container {
        max-width: 1200px !important;
    }
    
    /* Ensure proper stacking */
    .navbar {
        z-index: 1000 !important;
    }
    
    /* Enhanced hero container */
    .hero-container {
        align-items: center !important;
        gap: 4rem !important;
    }
    
    /* Feature grid improvements */
    .features-grid {
        gap: 2rem !important;
    }
    
    /* Ensure smooth transitions everywhere */
    .feature-card,
    .btn,
    .nav-link,
    .hero-image,
    .section-title {
        transition: all var(--transition-normal) !important;
    }
</style>
{%endblock%}

{% block content %}
    <!-- Bootstrap Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <div class="logo-placeholder">Brihat Mridanga</div>
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" 
                    data-bs-target="#navbarNav" aria-controls="navbarNav" 
                    aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#features">Features</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about">About</a>
                    </li>
                </ul>
                <div class="d-flex">
                    <a href="{% url 'login' %}" class="btn btn-primary">Login</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Rest of your content here -->
    <main>
        <!-- Hero Section -->
        <section id="home" class="hero">
            <!-- 3D Background Canvas -->
            <canvas id="heroCanvas" class="three-canvas"></canvas>
            
            <div class="container">
                <div class="hero-container">
                    <div class="hero-content">
                        <h1 class="hero-title scroll-reveal" data-text="Manage Your Book Distribution and Inventory Swiftly">Manage Your Book Distribution and Inventory Swiftly  </h1>
                        <p class="hero-subtitle scroll-reveal">Streamline your book distribution management process with our comprehensive inventory system designed for efficiency and accuracy.</p>
                        <div class="hero-cta scroll-reveal">
                            <a href={%url 'login' %} class="btn btn-primary">Get Started</a>
                            <a href="#features" class="btn btn-outline">Learn More</a>
                        </div>
                    </div>
                    <div class="hero-image">
                        <!-- You'll add your image here with: -->
                            <img src="{% static 'logo.jpg' %}" alt="Book Distribution System"> 
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section - Enhanced with 3D effects -->
        <section id="features" class="section features-3d-container">
            <!-- 3D Features Background -->
            <canvas id="featuresCanvas" class="three-canvas"></canvas>
            
            <div class="container">
                <h2 class="section-title scroll-reveal">Our Features</h2>
                <div class="features-container">
                    <div class="features-grid">
                        <div class="feature-card feature-card-3d scroll-reveal" data-tilt>
                            <div class="feature-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                                    <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                                    <line x1="12" y1="22.08" x2="12" y2="12"></line>
                                </svg>
                            </div>
                            <h3 class="feature-title">Inventory Management</h3>
                            <p>Maintain a complete record of your book inventory with automatic updates as transactions occur.</p>
                        </div>
                        <div class="feature-card feature-card-3d scroll-reveal" data-tilt>
                            <div class="feature-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1-2-2h2"></path>
                                    <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                                    <path d="M9 14h6"></path>
                                    <path d="M9 10h6"></path>
                                    <path d="M9 18h6"></path>
                                </svg>
                            </div>
                            <h3 class="feature-title">Transaction Management</h3>
                            <p>Easily record and manage all your book distributions with our intuitive transaction system.</p>
                        </div>
                        <div class="feature-card feature-card-3d scroll-reveal" data-tilt>
                            <div class="feature-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 20V10"></path>
                                    <path d="M18 20V4"></path>
                                    <path d="M6 20v-4"></path>
                                </svg>
                            </div>
                            <h3 class="feature-title">Analytics & Reports</h3>
                            <p>Get detailed insights about your book distribution activities with advanced analytics and reports.</p>
                        </div>
                        <div class="feature-card feature-card-3d scroll-reveal" data-tilt>
                            <div class="feature-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                                </svg>
                            </div>
                            <h3 class="feature-title">Notifications</h3>
                            <p>Stay updated with real-time notifications about important inventory changes and transactions.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section - Text only now -->
        <section id="about" class="section about">
            <div class="container">
                <h2 class="section-title scroll-reveal">About Brihat Mridanga</h2>
                <div class="about-content scroll-reveal">
                    <div class="about-text">
                        <p>Brihat Mridanga is a comprehensive book inventory management system designed to help organization to streamline their book distribution process. Our platform provides powerful tools to efficiently manage inventory, track distributions, and analyze performance.</p>
                        <br>
                        <p>Founded with the mission to make book distribution management effortless, we continue to innovate and improve our system based on user feedback and industry best practices.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Brihat Mridanga</h3>
                    <p>Efficient book inventory management for your distribution needs. We help organization to streamline their book distribution process with our comprehensive solution.</p>
                </div>
                <div class="footer-column contact">
                    <h3>Contact</h3>
                    <ul class="footer-contact-info">
                        <li><a href="mailto:info@brihadmridanga.com">mridangabrihat@gmail.com</a></li>
                        {% comment %} <li><a href="tel:+1234567890">+1 (234) 567-890</a></li> {% endcomment %}
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-contact-info">
                        <li><a href="#home">Home</a></li>
                        <li><a href="#features">Features</a></li>
                        <li><a href="#about">About</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                &copy; 2025 Brihat Mridanga. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- Three.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        // Three.js Scene Setup
        let heroScene, heroCamera, heroRenderer, heroParticles = [];
        let featuresScene, featuresCamera, featuresRenderer;
        let mouseX = 0, mouseY = 0;

        // Initialize Hero 3D Background
        function initHero3D() {
            // Skip 3D initialization on small screens
            if (window.innerWidth <= 480) return;
            
            const canvas = document.getElementById('heroCanvas');
            if (!canvas) return;
            
            const container = canvas.parentElement;
            
            // Scene setup
            heroScene = new THREE.Scene();
            heroCamera = new THREE.PerspectiveCamera(75, container.offsetWidth / container.offsetHeight, 0.1, 1000);
            heroRenderer = new THREE.WebGLRenderer({ 
                canvas: canvas, 
                alpha: true,
                antialias: window.devicePixelRatio <= 1, // Disable antialiasing on high DPI for performance
                powerPreference: "high-performance"
            });
            heroRenderer.setSize(container.offsetWidth, container.offsetHeight);
            heroRenderer.setClearColor(0x000000, 0);

            // Adjust particle count based on screen size
            let particleCount = 50;
            if (window.innerWidth <= 768) particleCount = 25;
            if (window.innerWidth <= 480) particleCount = 0;
            
            const colors = [0x667eea, 0x764ba2, 0x667eea, 0x764ba2];
            
            for (let i = 0; i < particleCount; i++) {
                // Create book-like geometry
                const geometry = new THREE.BoxGeometry(
                    Math.random() * 0.3 + 0.1,
                    Math.random() * 0.4 + 0.2,
                    Math.random() * 0.05 + 0.02
                );
                
                const material = new THREE.MeshPhongMaterial({
                    color: colors[Math.floor(Math.random() * colors.length)],
                    transparent: true,
                    opacity: 0.7
                });
                
                const particle = new THREE.Mesh(geometry, material);
                
                // Random positioning
                particle.position.x = (Math.random() - 0.5) * 20;
                particle.position.y = (Math.random() - 0.5) * 10;
                particle.position.z = (Math.random() - 0.5) * 10;
                
                // Random rotation
                particle.rotation.x = Math.random() * Math.PI;
                particle.rotation.y = Math.random() * Math.PI;
                particle.rotation.z = Math.random() * Math.PI;
                
                // Store initial position and random properties
                particle.userData = {
                    initialX: particle.position.x,
                    initialY: particle.position.y,
                    rotationSpeed: Math.random() * 0.02 + 0.01,
                    floatSpeed: Math.random() * 0.02 + 0.01
                };
                
                heroParticles.push(particle);
                heroScene.add(particle);
            }

            // Add lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            heroScene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0x417690, 0.8);
            directionalLight.position.set(5, 5, 5);
            heroScene.add(directionalLight);

            heroCamera.position.z = 5;
        }

        // Initialize Features 3D Background
        function initFeatures3D() {
            // Skip 3D initialization on small screens
            if (window.innerWidth <= 480) return;
            
            const canvas = document.getElementById('featuresCanvas');
            if (!canvas) return;
            
            const container = canvas.parentElement;
            
            featuresScene = new THREE.Scene();
            featuresCamera = new THREE.PerspectiveCamera(75, container.offsetWidth / container.offsetHeight, 0.1, 1000);
            featuresRenderer = new THREE.WebGLRenderer({ 
                canvas: canvas, 
                alpha: true,
                antialias: window.devicePixelRatio <= 1, // Disable antialiasing on high DPI for performance
                powerPreference: "high-performance"
            });
            featuresRenderer.setSize(container.offsetWidth, container.offsetHeight);
            featuresRenderer.setClearColor(0x000000, 0);

            // Create geometric connections
            const points = [];
            for (let i = 0; i < 20; i++) {
                points.push(new THREE.Vector3(
                    (Math.random() - 0.5) * 15,
                    (Math.random() - 0.5) * 8,
                    (Math.random() - 0.5) * 5
                ));
            }

            // Create lines connecting points
            for (let i = 0; i < points.length - 1; i++) {
                const geometry = new THREE.BufferGeometry().setFromPoints([points[i], points[i + 1]]);
                const material = new THREE.LineBasicMaterial({
                    color: 0x417690,
                    transparent: true,
                    opacity: 0.3
                });
                const line = new THREE.Line(geometry, material);
                featuresScene.add(line);
            }

            // Add elegant floating orbs instead of geometric shapes
            for (let i = 0; i < 12; i++) {
                const geometry = new THREE.SphereGeometry(0.15, 16, 16);
                const material = new THREE.MeshPhongMaterial({
                    color: new THREE.Color().setHSL(0.65 + Math.random() * 0.1, 0.7, 0.6),
                    transparent: true,
                    opacity: 0.6,
                    emissive: new THREE.Color().setHSL(0.65 + Math.random() * 0.1, 0.3, 0.1)
                });
                
                const orb = new THREE.Mesh(geometry, material);
                orb.position.x = (Math.random() - 0.5) * 10;
                orb.position.y = (Math.random() - 0.5) * 5;
                orb.position.z = (Math.random() - 0.5) * 3;
                
                orb.userData = {
                    initialX: orb.position.x,
                    initialY: orb.position.y,
                    initialZ: orb.position.z,
                    speed: Math.random() * 0.02 + 0.01,
                    amplitude: Math.random() * 0.5 + 0.3
                };
                
                featuresScene.add(orb);
            }

            // Add lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            featuresScene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0x417690, 0.6);
            directionalLight.position.set(3, 3, 3);
            featuresScene.add(directionalLight);

            featuresCamera.position.z = 4;
        }

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);

            const time = Date.now() * 0.001;

            // Animate hero particles
            if (heroParticles.length > 0) {
                heroParticles.forEach(particle => {
                    particle.rotation.x += particle.userData.rotationSpeed;
                    particle.rotation.y += particle.userData.rotationSpeed;
                    
                    // Floating motion
                    particle.position.y = particle.userData.initialY + Math.sin(time + particle.userData.initialX) * 0.5;
                    
                    // Mouse interaction
                    particle.position.x = particle.userData.initialX + (mouseX * 0.0005);
                    particle.position.z += (mouseY * 0.0005 - particle.position.z) * 0.05;
                });

                heroRenderer.render(heroScene, heroCamera);
            }

            // Animate features elements with smooth floating orbs
            if (featuresScene) {
                featuresScene.children.forEach(child => {
                    if (child.userData && child.userData.speed) {
                        // Smooth sine wave floating motion
                        child.position.y = child.userData.initialY + Math.sin(time * child.userData.speed) * child.userData.amplitude;
                        child.position.x = child.userData.initialX + Math.cos(time * child.userData.speed * 0.7) * (child.userData.amplitude * 0.5);
                        
                        // Subtle rotation for elegance
                        child.rotation.x += 0.005;
                        child.rotation.y += 0.003;
                        
                        // Gentle pulsing glow effect
                        if (child.material && child.material.emissive) {
                            const glowIntensity = 0.1 + Math.sin(time * 2 + child.userData.initialX) * 0.05;
                            child.material.emissive.setHSL(0.65 + Math.sin(time) * 0.05, 0.3, glowIntensity);
                        }
                    }
                });

                featuresRenderer.render(featuresScene, featuresCamera);
            }
        }

        // Mouse tracking
        document.addEventListener('mousemove', (event) => {
            mouseX = (event.clientX - window.innerWidth / 2);
            mouseY = (event.clientY - window.innerHeight / 2);
        });

        // Tilt effect for feature cards
        function initTiltEffect() {
            const cards = document.querySelectorAll('[data-tilt]');
            
            cards.forEach(card => {
                card.addEventListener('mouseenter', () => {
                    card.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg)';
                    card.style.transition = 'transform 0.1s ease-out';
                });

                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    
                    const rotateX = (y - centerY) / 10;
                    const rotateY = (centerX - x) / 10;
                    
                    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.05, 1.05, 1.05)`;
                });

                card.addEventListener('mouseleave', () => {
                    card.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)';
                    card.style.transition = 'transform 0.3s ease-out';
                });
            });
        }

        // Enhanced responsive window resize handler
        function onWindowResize() {
            // Throttle resize events for performance
            clearTimeout(window.resizeTimeout);
            window.resizeTimeout = setTimeout(() => {
                handleResize();
            }, 100);
        }

        function handleResize() {
            const isSmallScreen = window.innerWidth <= 480;
            const isMediumScreen = window.innerWidth <= 768;
            
            // Hero canvas resize
            if (heroCamera && heroRenderer && !isSmallScreen) {
                const heroContainer = document.getElementById('heroCanvas').parentElement;
                if (heroContainer) {
                    heroCamera.aspect = heroContainer.offsetWidth / heroContainer.offsetHeight;
                    heroCamera.updateProjectionMatrix();
                    heroRenderer.setSize(heroContainer.offsetWidth, heroContainer.offsetHeight);
                    
                    // Adjust particle count based on screen size
                    if (isMediumScreen && heroParticles.length > 25) {
                        // Remove some particles on smaller screens for performance
                        for (let i = heroParticles.length - 1; i >= 25; i--) {
                            heroScene.remove(heroParticles[i]);
                            heroParticles.splice(i, 1);
                        }
                    }
                }
            }

            // Features canvas resize
            if (featuresCamera && featuresRenderer && !isSmallScreen) {
                const featuresContainer = document.getElementById('featuresCanvas').parentElement;
                if (featuresContainer) {
                    featuresCamera.aspect = featuresContainer.offsetWidth / featuresContainer.offsetHeight;
                    featuresCamera.updateProjectionMatrix();
                    featuresRenderer.setSize(featuresContainer.offsetWidth, featuresContainer.offsetHeight);
                }
            }

            // Hide/show canvases based on screen size
            const heroCanvas = document.getElementById('heroCanvas');
            const featuresCanvas = document.getElementById('featuresCanvas');
            
            if (isSmallScreen) {
                if (heroCanvas) heroCanvas.style.display = 'none';
                if (featuresCanvas) featuresCanvas.style.display = 'none';
            } else {
                if (heroCanvas) heroCanvas.style.display = 'block';
                if (featuresCanvas) featuresCanvas.style.display = 'block';
            }
        }

        // Debounced scroll handler for better performance
        let scrollTimeout;
        function throttledScrollHandler() {
            if (scrollTimeout) return;
            scrollTimeout = setTimeout(() => {
                // Navbar scroll effect
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 10) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
                scrollTimeout = null;
            }, 16); // ~60fps
        }

        // Scroll-triggered animations
        function initScrollAnimations() {
            const scrollElements = document.querySelectorAll('.scroll-reveal');
            
            const elementInView = (el, dividend = 1) => {
                const elementTop = el.getBoundingClientRect().top;
                return (
                    elementTop <= (window.innerHeight || document.documentElement.clientHeight) / dividend
                );
            };

            const elementOutofView = (el) => {
                const elementTop = el.getBoundingClientRect().top;
                return (
                    elementTop > (window.innerHeight || document.documentElement.clientHeight)
                );
            };

            const displayScrollElement = (element) => {
                element.classList.add('revealed');
            };

            const hideScrollElement = (element) => {
                element.classList.remove('revealed');
            };

            const handleScrollAnimation = () => {
                scrollElements.forEach((el) => {
                    if (elementInView(el, 1.25)) {
                        displayScrollElement(el);
                    } else if (elementOutofView(el)) {
                        hideScrollElement(el);
                    }
                });
            };

            window.addEventListener('scroll', () => {
                handleScrollAnimation();
            });

            // Initial check for elements already in view
            handleScrollAnimation();
        }

        // Page loading effect
        function initPageLoadEffect() {
            document.body.classList.add('page-loading');
            
            window.addEventListener('load', () => {
                setTimeout(() => {
                    document.body.classList.remove('page-loading');
                    document.body.classList.add('page-loaded');
                }, 300);
            });
        }



        // Enhanced particle background system
        function addParticleBackground() {
            const featuresSection = document.querySelector('.features-3d-container');
            const heroSection = document.querySelector('.hero');
            if (!featuresSection) return;

            // Features section particles - more elegant
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                const size = Math.random() * 6 + 2;
                const hue = 250 + Math.random() * 40; // Purple-blue range
                
                particle.style.cssText = `
                    position: absolute;
                    width: ${size}px;
                    height: ${size}px;
                    background: radial-gradient(circle, hsla(${hue}, 70%, 60%, 0.8), hsla(${hue}, 70%, 60%, 0));
                    border-radius: 50%;
                    left: ${Math.random() * 100}%;
                    top: ${Math.random() * 100}%;
                    animation: elegant-float ${Math.random() * 15 + 10}s ease-in-out infinite;
                    animation-delay: ${Math.random() * 5}s;
                    pointer-events: none;
                    filter: blur(1px);
                    z-index: 1;
                `;
                featuresSection.appendChild(particle);
            }

            // Hero section ambient particles
            if (heroSection) {
                for (let i = 0; i < 8; i++) {
                    const particle = document.createElement('div');
                    const size = Math.random() * 8 + 3;
                    
                    particle.style.cssText = `
                        position: absolute;
                        width: ${size}px;
                        height: ${size}px;
                        background: radial-gradient(circle, rgba(102, 126, 234, 0.3), transparent);
                        border-radius: 50%;
                        left: ${Math.random() * 100}%;
                        top: ${Math.random() * 100}%;
                        animation: ambient-drift ${Math.random() * 20 + 15}s linear infinite;
                        animation-delay: ${Math.random() * 8}s;
                        pointer-events: none;
                        z-index: 1;
                    `;
                    heroSection.appendChild(particle);
                }
            }
        }

        // Add CSS animations for particles
        function addParticleAnimations() {
            const style = document.createElement('style');
            style.textContent = `
                @keyframes elegant-float {
                    0%, 100% {
                        transform: translateY(0px) translateX(0px) scale(1);
                        opacity: 0.3;
                    }
                    25% {
                        transform: translateY(-20px) translateX(10px) scale(1.1);
                        opacity: 0.6;
                    }
                    50% {
                        transform: translateY(-10px) translateX(-5px) scale(0.9);
                        opacity: 0.8;
                    }
                    75% {
                        transform: translateY(-30px) translateX(-10px) scale(1.05);
                        opacity: 0.4;
                    }
                }

                @keyframes ambient-drift {
                    0% {
                        transform: translateX(-100px) translateY(100vh) scale(0);
                        opacity: 0;
                    }
                    10% {
                        opacity: 0.3;
                        transform: scale(1);
                    }
                    90% {
                        opacity: 0.1;
                    }
                    100% {
                        transform: translateX(100px) translateY(-100px) scale(0);
                        opacity: 0;
                    }
                }
            `;
            document.head.appendChild(style);
        }

        // Initialize everything when page loads
        window.addEventListener('DOMContentLoaded', () => {
            initPageLoadEffect();
            addParticleAnimations(); // Add particle CSS animations first
            addParticleBackground();
            
            // Add throttled scroll handler for better performance
            window.addEventListener('scroll', throttledScrollHandler);
        });

        window.addEventListener('load', () => {
            initHero3D();
            initFeatures3D();
            initTiltEffect();
            initScrollAnimations();
            animate();
            
            // Trigger initial resize for proper responsive setup
            setTimeout(() => {
                handleResize();
            }, 100);
        });

        // Enhanced resize handling with ResizeObserver for better performance
        if (window.ResizeObserver) {
            const resizeObserver = new ResizeObserver(entries => {
                clearTimeout(window.resizeTimeout);
                window.resizeTimeout = setTimeout(() => {
                    handleResize();
                }, 100);
            });
            
            // Observe main sections for responsive updates
            document.addEventListener('DOMContentLoaded', () => {
                const heroSection = document.querySelector('.hero');
                const featuresSection = document.querySelector('.features-3d-container');
                
                if (heroSection) resizeObserver.observe(heroSection);
                if (featuresSection) resizeObserver.observe(featuresSection);
            });
        }

        window.addEventListener('resize', onWindowResize);
    </script>
{% endblock %}